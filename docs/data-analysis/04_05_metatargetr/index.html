<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-data-analysis/04_05_metatargetr" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Analyzing Ad Targeting Insights: An Introduction to the metatargetr R Package | Data Knowledge Hub for Researching Online Discourse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.data-knowledge-hub.com/docs/data-analysis/04_05_metatargetr"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Analyzing Ad Targeting Insights: An Introduction to the metatargetr R Package | Data Knowledge Hub for Researching Online Discourse"><meta data-rh="true" name="description" content="&lt;AuthorCard"><meta data-rh="true" property="og:description" content="&lt;AuthorCard"><link data-rh="true" rel="icon" href="/img/dkh_logo.png"><link data-rh="true" rel="canonical" href="https://www.data-knowledge-hub.com/docs/data-analysis/04_05_metatargetr"><link data-rh="true" rel="alternate" href="https://www.data-knowledge-hub.com/docs/data-analysis/04_05_metatargetr" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.data-knowledge-hub.com/docs/data-analysis/04_05_metatargetr" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e8887b71.css">
<script src="/assets/js/runtime~main.1ed8ba9a.js" defer="defer"></script>
<script src="/assets/js/main.935083f8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/dkh_logo_text.svg" alt="Data Knowledge Hub Logo" class="logo themedComponent_mlkZ themedComponent--light_NVdE" height="10px"><img src="/img/dkh_logo_text.svg" alt="Data Knowledge Hub Logo" class="logo themedComponent_mlkZ themedComponent--dark_xIcU" height="10px"></div></a><a href="#about" class="navbar__item navbar__link">About</a><a href="#hub" class="navbar__item navbar__link">Knowledge Base</a><a href="#contribute" class="navbar__item navbar__link">Why contribute?</a><a href="#team" class="navbar__item navbar__link">Who is behind it?</a></div><div class="navbar__items navbar__items--right"><a href="https://upgradedemocracy.de/en/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Initiators<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/background-rationale">What is the Data Knowledge Hub?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/get-started/">Getting started</a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/data-access/">Data access and permissions</a><button aria-label="Expand sidebar category &#x27;Data access and permissions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/data-collection/">Data collection methods</a><button aria-label="Expand sidebar category &#x27;Data collection methods&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/data-analysis/">Data analysis projects</a><button aria-label="Collapse sidebar category &#x27;Data analysis projects&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data-analysis/04_01_data-analysis-methods">Overview: How to analyse social media data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data-analysis/04_02_hashtag-analysis">TikTok Hashtag Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data-analysis/04_03_social-network-analysis">Social Network Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/data-analysis/04_04_disarm-framework">Data analysis using the DISARM Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/data-analysis/04_05_metatargetr">Analyzing Ad Targeting Insights: An Introduction to the metatargetr R Package</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/literature/">Research resources</a><button aria-label="Expand sidebar category &#x27;Research resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribute/06_01_how-to-contribute">Community and support</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg width="16" height="16" viewBox="5 1 30 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M30.7422 16.2334V30.7428C30.7422 31.4424 30.4643 32.1134 29.9696 32.6082C29.4748 33.1029 28.8038 33.3808 28.1042 33.3808H12.2758C11.5761 33.3808 10.9051 33.1029 10.4104 32.6082C9.91563 32.1134 9.6377 31.4424 9.6377 30.7428V16.2334" stroke="#B3B3B3" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path><path d="M7 18.3437L20.1903 7L33.3807 18.3437" stroke="#B3B3B3" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/data-analysis/"><span itemprop="name">Data analysis projects</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Analyzing Ad Targeting Insights: An Introduction to the metatargetr R Package</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Analyzing Ad Targeting Insights: An Introduction to the metatargetr R Package</h1></header><div style="display:inline-block;background-color:#1144A4;color:#fff;border-radius:25px;padding-top:5px;padding-bottom:5px;padding-left:15px;padding-right:15px;font-size:14px;font-weight:600;margin:5px">Level: <!-- -->Intermediate</div>
<div style="display:inline-block;background-color:#1EB4FF;color:black;border-radius:25px;padding-top:5px;padding-bottom:5px;padding-left:15px;padding-right:15px;font-size:14px;font-weight:600;margin:5px">Platform: <!-- -->Meta</div>
<div style="display:inline-block;background-color:#73F19C;color:black;border-radius:25px;padding-top:5px;padding-bottom:5px;padding-left:15px;padding-right:15px;font-size:14px;font-weight:600;margin:5px">Language: <!-- -->R</div>
<div style="display:flex;align-items:center;color:#000;background-color:#fff;border-radius:5px;padding:10px;margin-bottom:10px"><div style="width:2px;height:50px;background-color:#000;margin-right:10px"></div><div style="color:#fff;padding:2px;display:none;justify-content:center;align-items:center;background-color:#2C60AD;border-radius:100%;width:50px;height:50px;font-weight:600"> <!-- -->FV</div><img style="vertical-align:middle;width:50px;height:50px;border-radius:50%" src="/assets/images/votta-efa52a1637cf5ac9d2c3d87490fc1e4f.jpg"><div style="padding-left:10px"><div style="font-weight:bold">Fabio Votta</div><div style="font-size:14px">ASCoR | University of Amsterdam</div><div style="font-size:14px"><a style="display:inline;margin-left:2px" href="https://www.favstats.eu/" target="_blank">Website </a><a style="display:none;margin-left:2px" target="_blank">Twitter / X </a><a style="display:none;margin-left:2px" target="_blank">Mastodon </a><a style="display:none;margin-left:2px" target="_blank">Google Scholar </a><a style="display:inline;margin-left:2px" href="https://www.linkedin.com/in/dr-fabio-votta-81a862131" target="_blank">LinkedIn </a><a style="display:inline;margin-left:2px" href="https://bsky.app/profile/favstats.eu" target="_blank">Bluesky </a></div></div></div>
<div style="width:100%"><div style="display:inline-block;text-align:left;color:#000000;padding-top:0px;padding-bottom:20px;padding-left:0px;font-size:12px;font-weight:500;margin:0px;width:100%"><img src="/img/icon-edit.svg" style="height:12px"> <!-- -->Original post on 30.07.2025 by Fabio Votta<br></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>What political messages are being sent to which audiences? By using
digital advertising tools provided by social media platforms,
advertisers can select which audiences they want to reach and are able
to send different messages for each one of them. That is why
understanding the use of target audiences is as crucial as knowing what
is being advertised. While Meta’s official Ad Library API provides a
range of data, its restrictive access requirements and limited targeting
granularity often fall short of the needs of researchers and
journalists. The <code>metatargetr</code> R package offers an alternative,
unofficial route to this information, by retrieving and archiving ad
data directly from Meta’s public-facing Ad Library.</p>
<p>This tutorial focuses on how to use <code>metatargetr</code> to retrieve and, most
importantly, analyze this targeting data. Unlike the official Meta Ad
Library API, which provides data on an ad-by-ad basis with broad
spending ranges, <code>metatargetr</code> offers a unique, advertiser-level
perspective.</p>
<p>Here are the key advantages over Meta’s official Ad Library API:</p>
<ul>
<li>
<p><strong>Advertiser-Level Data:</strong> Instead of looking at single ads, we get a
consolidated view of the entire targeting strategy of a Facebook page
or Instagram account.</p>
</li>
<li>
<p><strong>Exact Spending per Criterion:</strong> The data provides the exact percentage
of a page’s total spend allocated to each specific targeting
criterion. This allows for precise analysis of budget allocation, a
feature not available through the official API.</p>
</li>
<li>
<p><strong>Additional Audience Insights:</strong> The dataset goes beyond the demographic
targeting that is available via the API, as it reveals spending on
powerful tools like Detailed Targeting (e.g. interest profiles that
Meta categorizes its users in), Custom Audiences (e.g., targeting a
list of existing customers) and Lookalike Audiences (targeting users
similar to an existing audience). Furthermore, while only demographic
targeting (age, gender, location) is available for countries in the EU
since the implementation of the Digital Services Act (DSA),
<code>metatargetr</code> provides targeting insights for all advertising pages on
Meta in the world.</p>
</li>
</ul>
<p>This tutorial will walk you through installing the package, retrieving
historical targeting data, and using tidyverse tools to create
compelling visualizations that reveal these hidden strategies.</p>
<p>Finally, it is important to note that <code>metatargetr</code> relies on web
scraping. This means it can be susceptible to changes in Facebook’s
website structure. While powerful, it should be considered a
complementary tool to the official API. <a href="https://data-knowledge-hub.com/docs/data-collection/03_00_platform-specific%20guidelines/03_04_data-collection_meta_ads" target="_blank" rel="noopener noreferrer">For a guide on using the
official Meta Ad Library API</a>, please see the other tutorial in this series.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3>
<p>First, you will need to install <code>metatargetr</code> and a few other helpful
packages from the tidyverse ecosystem. Since <code>metatargetr</code> is hosted on
GitHub, we will use the pak package for a smooth installation process.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install pak if you don&#x27;t have it already</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pak&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> install.packages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;pak&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install `metatargetr` and other useful packages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pak</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">pak</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;favstats/metatargetr&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;tidyverse&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;lubridate&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;scales&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now loading in the R packages:</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metatargetr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">library</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tidyverse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">library</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lubridate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">library</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scales</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-targeting-information-for-recent-ads-get_targeting">Retrieving Targeting Information for Recent Ads (<code>get_targeting</code>)<a href="#retrieving-targeting-information-for-recent-ads-get_targeting" class="hash-link" aria-label="Direct link to retrieving-targeting-information-for-recent-ads-get_targeting" title="Direct link to retrieving-targeting-information-for-recent-ads-get_targeting">​</a></h3>
<p>The core function for fetching live targeting data is <code>get_targeting()</code>.
This function scrapes the “Audience” tab of a Page’s Ad Library section,
providing insights into the age, gender, location but also custom and
lookalike audience targeting of their <em>recent ads</em> (i.e. only for the
last 7, 30, and 90 days).</p>
<p>Let us retrieve the targeting data for a specific Facebook Page. You
will need the Page ID, which can be found in the URL of the page’s Ad
Library entry or in the <a href="https://www.facebook.com/ads/library/report/" target="_blank" rel="noopener noreferrer">Meta Ad Library
Report</a> (which you can
also query via <code>metatargetr</code> using <code>get_ad_report</code>).</p>
<p>For example, here is the URL of the Ad Library page of the U.S.
Department of Homeland Security (DHS):</p>
<blockquote>
<p><a href="https://www.facebook.com/ads/library/?view_all_page_id=179587888720522" target="_blank" rel="noopener noreferrer">https://www.facebook.com/ads/library/?view_all_page_id=179587888720522</a></p>
</blockquote>
<p>The Page ID is the number after <code>view_all_page_id=</code> → <strong><code>179587888720522</code></strong>.</p>
<p>Here are the most important function parameters:</p>
<ul>
<li>
<p><code>id</code>: A character string representing the (Facebook) Page ID.</p>
</li>
<li>
<p><code>timeframe</code>: The time period for the data. Options are “LAST_7_DAYS”,
“LAST_30_DAYS”, or “LAST_90_DAYS”. The default is set at
“LAST_30_DAYS”.</p>
</li>
</ul>
<p>Let us retrieve the targeting info from a page that is currently
conducting large digital ad campaign, the U.S. Department of Homeland
Security:</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Fetch targeting data for a specific page for the last 30 days</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dhs_targeting_data </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_targeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;179587888720522&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeframe </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;LAST_30_DAYS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Inspect the structure of the returned data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">glimpse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dhs_targeting_data</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ## Rows: 91</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## Columns: 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ value                 &lt;chr&gt; &quot;All&quot;, &quot;Women&quot;, &quot;Men&quot;, &quot;Spanish&quot;, &quot;Boston (Manch…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ num_ads               &lt;int&gt; 15, 0, 0, 15, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_spend_pct       &lt;dbl&gt; 1.00000000, 0.00000000, 0.00000000, 1.00000000, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ type                  &lt;chr&gt; &quot;gender&quot;, &quot;gender&quot;, &quot;gender&quot;, &quot;language&quot;, &quot;locat…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ location_type         &lt;chr&gt; NA, NA, NA, NA, &quot;geo_markets&quot;, &quot;COUNTY&quot;, &quot;BOROUG…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ num_obfuscated        &lt;int&gt; NA, NA, NA, NA, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_exclusion          &lt;lgl&gt; NA, NA, NA, NA, FALSE, FALSE, FALSE, FALSE, FALS…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ detailed_type         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ ds                    &lt;chr&gt; &quot;2025-07-24&quot;, &quot;2025-07-24&quot;, &quot;2025-07-24&quot;, &quot;2025-…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ main_currency         &lt;chr&gt; &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;,…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_num_ads         &lt;int&gt; 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_spend_formatted &lt;chr&gt; &quot;$347,094&quot;, &quot;$347,094&quot;, &quot;$347,094&quot;, &quot;$347,094&quot;, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_30_day_available   &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_90_day_available   &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_id               &lt;chr&gt; &quot;179587888720522&quot;, &quot;179587888720522&quot;, &quot;179587888…</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output will be a tibble where each row represents a specific
demographic or location targeting segment for the ads run by that page
in the specified timeframe. Key columns include:</p>
<ul>
<li>
<p><code>value</code>: The exact targeting criterion used.</p>
</li>
<li>
<p><code>type</code>: The category of targeting (e.g., “age”, “gender”, “location”,
etc.).</p>
</li>
<li>
<p><code>total_spend_pct</code>: The proportion of the page’s ad spend directed at
a target audience (<code>value</code>) within the timeframe specified.</p>
</li>
<li>
<p><code>total_spend_formatted</code>: The total ad spend of the page in the
timeframe specified.</p>
</li>
<li>
<p><code>main_currency</code>: Information about the currency used by the page.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="historical-targeting-data-at-scale-get_targeting_db">Historical Targeting Data at Scale (<code>get_targeting_db</code>)<a href="#historical-targeting-data-at-scale-get_targeting_db" class="hash-link" aria-label="Direct link to historical-targeting-data-at-scale-get_targeting_db" title="Direct link to historical-targeting-data-at-scale-get_targeting_db">​</a></h3>
<p>The <code>get_targeting()</code> function is enough for retrieving targeting info
for specific pages that have run ads up to the last 90 days. However,
once 90 days have passed, Meta <em>does not</em> provide access to this data
anymore. This is where <code>metatargetr</code>’s true power lies: it retrieves,
archives, and provides access to a vast repository of pre-collected
targeting data for <em>all pages running political advertisements in the
world</em>. This data can be accessed through the <code>get_targeting_db()</code>
function, which downloads historical datasets have been collected since
late 2023.</p>
<p>Here are the most important function parameters:</p>
<ul>
<li>
<p><code>the_cntry</code>: The two-letter ISO country code for the desired dataset
(e.g., “DE”, “US”).</p>
</li>
<li>
<p><code>tf</code>: The timeframe in days (“LAST_7_DAYS”, “LAST_30_DAYS”,
“LAST_90_DAYS”).</p>
</li>
<li>
<p><code>ds</code>: A date string in “YYYY-MM-DD” format, identifying the date of
the specific archived dataset.</p>
</li>
</ul>
<p>A tip before you download a historical dataset: the
<code>get_targeting_metadata()</code> function allows you to see the available
dates for a given country and timeframe as the automated retrieval
process established by the package may have missed a certain date for a
specific country (or because Meta skipped them).</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get metadata for 90-day timeframe datasets in the US</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">us_90_day_metadata </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_targeting_metadata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">country_code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeframe </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;90&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># View the most recent available dates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">head</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">us_90_day_metadata</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ## # A tibble: 6 × 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ##   cntry ds         tframe      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ##   &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 1 US    2025-07-24 last_90_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 2 US    2025-07-23 last_90_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 3 US    2025-07-22 last_90_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 4 US    2025-07-21 last_90_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 5 US    2025-07-20 last_90_days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## 6 US    2025-07-18 last_90_days</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once you have identified a dataset you want, you can download it with
<code>get_targeting_db()</code>. Note that the archived data is typically available
with a delay of a few days. This function allows for powerful
longitudinal analysis across thousands of advertisers.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Download the US 90-day targeting dataset from a specific date in the past</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">us_targeting_archive </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_targeting_db</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">the_cntry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;90&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-06-30&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Inspect the archived data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># It contains the same structure as the live data, but for thousands of pages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">glimpse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">us_targeting_archive</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ## Rows: 690,219</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## Columns: 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ internal_id              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ no_data                  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ tstamp                   &lt;dttm&gt; 2025-07-04 05:30:28, 2025-07-04 05:30:28, 20…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_id                  &lt;chr&gt; &quot;761832453834971&quot;, &quot;761832453834971&quot;, &quot;761832…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ cntry                    &lt;chr&gt; &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_name                &lt;chr&gt; &quot;League of Independent Voters of Texas&quot;, &quot;Lea…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ partyfacts_id            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ sources                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ country                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ party                    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ left_right               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ tags                     &lt;glue&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ tags_ideology            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ disclaimer               &lt;chr&gt; &quot;LEAGUE OF INDEPENDENT VOTERS OF TEXAS&quot;, &quot;LEA…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ amount_spent_usd         &lt;chr&gt; &quot;405&quot;, &quot;405&quot;, &quot;405&quot;, &quot;405&quot;, &quot;405&quot;, &quot;405&quot;, &quot;40…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ number_of_ads_in_library &lt;chr&gt; &quot;14&quot;, &quot;14&quot;, &quot;14&quot;, &quot;14&quot;, &quot;14&quot;, &quot;14&quot;, &quot;14&quot;, &quot;14…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ date                     &lt;chr&gt; &quot;2025-06-29&quot;, &quot;2025-06-29&quot;, &quot;2025-06-29&quot;, &quot;20…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ path                     &lt;chr&gt; &quot;extracted/FacebookAdLibraryReport_2025-06-29…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ tf                       &lt;chr&gt; &quot;last_90_days&quot;, &quot;last_90_days&quot;, &quot;last_90_days…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ remove_em                &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_n                  &lt;int&gt; 35543, 35543, 35543, 35543, 35543, 35543, 355…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ amount_spent             &lt;dbl&gt; 405, 405, 405, 405, 405, 405, 405, 405, 405, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ value                    &lt;chr&gt; &quot;All&quot;, &quot;Women&quot;, &quot;Men&quot;, &quot;Bastrop, TX, United S…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ num_ads                  &lt;int&gt; 14, 0, 0, 7, 1, 6, 1, 0, 0, 0, 0, 0, 14, 14, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_spend_pct          &lt;dbl&gt; 1.00000000, 0.00000000, 0.00000000, 0.6351905…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ type                     &lt;chr&gt; &quot;gender&quot;, &quot;gender&quot;, &quot;gender&quot;, &quot;location&quot;, &quot;lo…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ location_type            &lt;chr&gt; NA, NA, NA, &quot;CITY&quot;, &quot;CITY&quot;, &quot;countries&quot;, &quot;zip…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ num_obfuscated           &lt;int&gt; NA, NA, NA, 2, 1, 0, 0, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_exclusion             &lt;lgl&gt; NA, NA, NA, FALSE, FALSE, FALSE, FALSE, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ custom_audience_type     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ ds                       &lt;chr&gt; &quot;2025-06-30&quot;, &quot;2025-06-30&quot;, &quot;2025-06-30&quot;, &quot;20…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ main_currency            &lt;chr&gt; &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;USD&quot;, &quot;US…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_num_ads            &lt;int&gt; 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 1…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ total_spend_formatted    &lt;dbl&gt; 405, 405, 405, 405, 405, 405, 405, 405, 405, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_30_day_available      &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_90_day_available      &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ detailed_type            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="analyzing-dhs-ad-campaigns-️">Analyzing DHS Ad Campaigns 🏛️<a href="#analyzing-dhs-ad-campaigns-️" class="hash-link" aria-label="Direct link to Analyzing DHS Ad Campaigns 🏛️" title="Direct link to Analyzing DHS Ad Campaigns 🏛️">​</a></h2>
<p>Now, let us apply what we have learned in a practical case study. We
will analyze the ad campaigns of the U.S. Department of Homeland
Security (DHS) to showcase how to combine historical data and visualize
targeting strategies. In this case study we analyze audience segments
derived from detailed targeting, how spend is allocated across those
segments, the county-level geographic focus of the campaign, and which
other advertisers use DHS-style proxy targeting. If you are interested
in a similar analysis I have conducted for a recent blog post of mine,
you can read the full post <a href="https://www.favstats.eu/post/dhs/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p><img decoding="async" loading="lazy" src="https://www.favstats.eu/img/headers/dhsads.jpg" alt="" class="img_ev3q">
Figure shows the ads that DHS runs which has DHS secretary Kristi Noem threaten &quot;if you are here illegally we will find and you and deport you&quot; with Spanish subtitles.</p>
<p>First, we will use <code>get_targeting_db()</code> to download two historical
snapshots of U.S. ad data. By combining data from different time points,
we can create a more comprehensive picture of an advertiser’s strategy
over a longer period.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-and-combining-data">Retrieving and Combining Data<a href="#retrieving-and-combining-data" class="hash-link" aria-label="Direct link to Retrieving and Combining Data" title="Direct link to Retrieving and Combining Data">​</a></h3>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Download two datasets from different dates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">targeting_jun </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_targeting_db</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">the_cntry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;90&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-06-30&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">targeting_apr </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_targeting_db</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">the_cntry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;US&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;90&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2025-04-01&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Combine the datasets and filter for the DHS page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The DHS Facebook Page ID is &quot;179587888720522&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dhs_data_raw </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> targeting_jun </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bind_rows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">targeting_apr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page_id </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;179587888720522&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The raw data contains spending percentages relative to the total spend
at the time of each snapshot. To get an accurate picture of the total
spend over our <em>combined period</em>, we need to aggregate the data
correctly. The helper function <code>aggr_targeting</code> recalculates the
spending for each targeting criterion based on the new, combined total.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Apply the function to our DHS data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dhs_data_agg </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> aggr_targeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dhs_data_raw</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div style="border:solid #1EB4FF;background:linear-gradient(262.38deg, #90E5FC 8.76%, #E3F8FE 96.47%);padding:25px;margin-bottom:15px;border-radius:10px"><div style="display:flex;align-items:center;min-height:22px;margin-bottom:12px"><img src="/img/icons/note.svg" alt="Note Icon" style="margin-right:10px;height:100%"><h5 style="font-size:20px;margin:0">Note</h5></div><div><p>The <code>aggr_targeting()</code> function creates a variable called <code>spend_per</code> which shows the spend per targeting criterion across the combined period. If you pull raw data with <code>get_targeting_db()</code>, you have to compute this measure yourself as <em>total spending</em> (<code>total_spend_formatted</code>) <em>×</em> <em>share of spending</em> (<code>total_spend_pct</code>).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="visualizing-detailed-targeting-criteria">Visualizing &quot;Detailed&quot; Targeting Criteria<a href="#visualizing-detailed-targeting-criteria" class="hash-link" aria-label="Direct link to Visualizing &quot;Detailed&quot; Targeting Criteria" title="Direct link to Visualizing &quot;Detailed&quot; Targeting Criteria">​</a></h3>
<p>One of the most powerful features of this dataset is the ability to see
the specific interests and behaviors an advertiser targets – data that
is not available via the typical API. Let us visualize what portion of
the DHS budget was spent on these “detailed” targeting criteria.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Filter for &quot;detailed&quot; targeting types and plot the top categories</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dhs_data_agg </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;detailed&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># For better labels, combine the type and value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mutate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> str_wrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">paste0</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str_to_title</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">detailed_type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Keep the top 10 criteria by spend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  slice_max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order_by </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Create the plot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ggplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fct_reorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">display_value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_col</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fill </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#003366&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dollar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> accuracy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hjust </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fontface </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bold&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scale_x_continuous</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> label_dollar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> expansion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DHS Detailed Targeting: Top Spending Categories&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subtitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Spend on interests, behaviors, and demographic categories on Meta&#x27;s platforms.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Estimated Ad Spend (USD)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    caption </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Data Source: Meta Ad Library via metatargetr&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme_minimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    panel.grid.major.y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element_blank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plot.title.position </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;plot&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/unnamed-chunk-10-1-244f3cfd332b8d2d8a1d17360fa30e7b.png" width="864" height="480" class="img_ev3q"></p>
<p>This chart clearly shows the specific audience segments the DHS
prioritized. We can see a significant focus on users who are interested
in Mexican culture events and music, and whose language is set to
Spanish. This provides concrete, data-driven insights into their
campaign strategy that would be difficult to obtain otherwise.</p>
<div style="border:solid #1EB4FF;background:linear-gradient(262.38deg, #90E5FC 8.76%, #E3F8FE 96.47%);padding:25px;margin-bottom:15px;border-radius:10px"><div style="display:flex;align-items:center;min-height:22px;margin-bottom:12px"><img src="/img/icons/note.svg" alt="Note Icon" style="margin-right:10px;height:100%"><h5 style="font-size:20px;margin:0">Note</h5></div><div><p>When multiple targeting criteria show identical spend, that likely indicates they were applied together on the same underlying ads. Because the data that is retrieved is aggregated at the advertiser level it is hard to isolate ads that ran simultaneously. For a better measurement of spend we could divide the total spending by the number of targeting criteria that have the same data (same number of ads and spending) by assuming that spending was divided about equally to each targeting criterion.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="visualizing-location-targeting-criteria">Visualizing Location Targeting Criteria<a href="#visualizing-location-targeting-criteria" class="hash-link" aria-label="Direct link to Visualizing Location Targeting Criteria" title="Direct link to Visualizing Location Targeting Criteria">​</a></h3>
<p>Next, let us analyze where the money was spent. We can filter the data
for location targeting and visualize the top-spending counties. This
reveals the geographic focus of the campaigns.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Filter for county-level location targeting and plot the top 15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dhs_data_agg </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location_type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;COUNTY&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  slice_max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">order_by </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mutate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location_label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> str_remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;, United States&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ggplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fct_reorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">location_label</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_col</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fill </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#c00000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dollar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spend_per</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> accuracy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hjust </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fontface </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bold&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scale_x_continuous</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> label_dollar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> expansion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Top 15 US Counties by DHS Ad Spend&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subtitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Estimated ad spending by the Department of Homeland Security on Meta&#x27;s platforms.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Estimated Ad Spend (USD)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    caption </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Data Source: Meta Ad Library via metatargetr&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme_minimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    panel.grid.major.y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element_blank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plot.title.position </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;plot&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/unnamed-chunk-11-1-4251952ff98bdeba659327cc3902b5be.png" width="864" height="480" class="img_ev3q"></p>
<p>This visualization instantly reveals the geographic focus of the DHS’s
advertising efforts. The spending is heavily concentrated in major
metropolitan area, particularly in states like California, Texas, New
York, and Florida with a large share of Latino citizen. This kind of
analysis is invaluable for understanding the geographic scope and
strategy of public information campaigns.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="visualizing-top-10-spenders-using-ethnic-proxies">Visualizing Top 10 Spenders using Ethnic Proxies<a href="#visualizing-top-10-spenders-using-ethnic-proxies" class="hash-link" aria-label="Direct link to Visualizing Top 10 Spenders using Ethnic Proxies" title="Direct link to Visualizing Top 10 Spenders using Ethnic Proxies">​</a></h3>
<blockquote>
<p>Who else is using targeting these targeting criteria that DHS utilizes
as proxies to reach the Latino community?</p>
</blockquote>
<p>First, the detailed targeting criteria used by the DHS ads are filtered,
and <em>all</em> of the data is aggregated.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">latino_targeting </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> dhs_data_agg </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;detailed&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">## lets remove friends of football fans as that is not related by itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Friends of football fans&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">us_aggr </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> targeting_jun </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bind_rows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">targeting_apr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inner_join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">latino_targeting</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  aggr_targeting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, I am focusing only on the top 10 spenders that have used these
targeting categories.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">top_10_data_for_plot </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> us_aggr </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  distinct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> total_spend</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  arrange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">total_spend</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page_id</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, we can put everything together and reveal who the top spenders
are:</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">us_aggr </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inner_join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">top_10_data_for_plot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mutate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fct_reorder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ggplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> page_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spend_per</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  geom_boxplot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># geom_col is better for this; position=&quot;stack&quot; is default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scale_y_continuous</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dollar_format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prefix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;$&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;k&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Make the bars start at the y-axis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Top 10 Advertisers Using DHS&#x27;s &#x27;Latino Proxy&#x27; Targeting&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subtitle </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Breakdown of ad spend by detailed targeting criterion&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Total Ad Spend (USD)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme_minimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_family </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sans&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  theme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    legend.position </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bottom&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    panel.grid.major.y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element_blank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Cleaner look</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    panel.grid.minor.x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element_blank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    axis.text.y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> element_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">face </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bold&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  coord_flip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/unnamed-chunk-14-1-522184d405e5eae55656833a7239f3cb.png" width="864" height="480" class="img_ev3q"></p>
<p>Beyond the Department of Homeland Security, the analysis reveals that
the targeting criteria used as proxies for the Latino community are also
employed by a diverse range of other major advertisers. The top 10
spenders using these methods include:</p>
<ul>
<li>
<p><strong>Public Health &amp; Advocacy Groups:</strong> Organizations like Planned
Parenthood, Tobacco Free Florida, and The California Endowment use
this targeting for outreach and awareness campaigns.</p>
</li>
<li>
<p><strong>Non-Profits and Charities:</strong> Pages such as Catholic Relief Services,
Operation Smile, and The International Fellowship of Christians and
Jews appear to use these criteria for fundraising and supporter
engagement.</p>
</li>
</ul>
<p>This confirms that while the DHS campaign is unique in its scale and
messaging, the underlying methods for reaching the Latino community are
common tools used by a wide array of organizations across the non-profit
and public health sectors.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-glimpse-into-other-metatargetr-features">A Glimpse into Other <code>metatargetr</code> Features<a href="#a-glimpse-into-other-metatargetr-features" class="hash-link" aria-label="Direct link to a-glimpse-into-other-metatargetr-features" title="Direct link to a-glimpse-into-other-metatargetr-features">​</a></h2>
<p>Beyond its core focus on targeting, <code>metatargetr</code> includes a suite of
functions for retrieving other valuable types of data, enabling a more
holistic analysis of digital advertising. Below is a very short showcase
of them:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="facebook-and-instagram-page-information">Facebook and Instagram Page Information<a href="#facebook-and-instagram-page-information" class="hash-link" aria-label="Direct link to Facebook and Instagram Page Information" title="Direct link to Facebook and Instagram Page Information">​</a></h3>
<p>To complement the targeting data, you can retrieve detailed metadata
about Facebook pages, such as like counts, creation dates, and contact
information, using <code>get_page_insights()</code>. For historical page
information and from many pages at once, the package also offers
<code>get_page_info_db()</code>.</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dhs_page_info </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> get_page_insights</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pageid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;179587888720522&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> include_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;page_info&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">glimpse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dhs_page_info</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ## Rows: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## Columns: 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_name              &lt;chr&gt; &quot;Department of Homeland Security&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ is_profile_page        &lt;chr&gt; &quot;FALSE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_is_deleted        &lt;chr&gt; &quot;FALSE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_is_restricted     &lt;chr&gt; &quot;FALSE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ has_blank_ads          &lt;chr&gt; &quot;FALSE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ hidden_ads             &lt;chr&gt; &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_profile_uri       &lt;chr&gt; &quot;https://facebook.com/homelandsecurity&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_id                &lt;chr&gt; &quot;179587888720522&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_verification      &lt;chr&gt; &quot;BLUE_VERIFIED&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ entity_type            &lt;chr&gt; &quot;PERSON_PROFILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_alias             &lt;chr&gt; &quot;homelandsecurity&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ likes                  &lt;chr&gt; &quot;1011008&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ page_category          &lt;chr&gt; &quot;Government organisation&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ ig_verification        &lt;chr&gt; &quot;TRUE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ ig_username            &lt;chr&gt; &quot;dhsgov&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ ig_followers           &lt;chr&gt; &quot;313631&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ shared_disclaimer_info &lt;chr&gt; &quot;[]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ about                  &lt;chr&gt; &quot;Official Facebook page of the U.S. Department …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ event                  &lt;chr&gt; &quot;CREATION: 2010-12-01 20:39:04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ city                   &lt;chr&gt; &quot;Washington&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ country                &lt;chr&gt; &quot;United States of America&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ postal_code            &lt;chr&gt; &quot;20528&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ state                  &lt;chr&gt; &quot;DC&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ phone_number           &lt;chr&gt; &quot;+12022817828&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="google-ad-data">Google Ad Data<a href="#google-ad-data" class="hash-link" aria-label="Direct link to Google Ad Data" title="Direct link to Google Ad Data">​</a></h3>
<p>The package is not limited to Meta. While outside the scope of this
tutorial, functions exist to retrieve spending data from Google’s Ad
Library, allowing for powerful cross-platform comparisons.</p>
<p>For example, the <code>get_ggl_ads</code> function can get different tables that
are provided by the Google Ad Transparency report, such as statistics on
weekly spending per advertiser:</p>
<div class="language-r codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-r codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">get_ggl_ads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;weekly_spend&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token percent-operator operator" style="color:#393A34">%&gt;%</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glimpse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ## ℹ Downloading data bundle from Google... (This may take a moment)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## ✔ Download complete. Extracting files...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## ℹ Reading data from &#x27;google-political-ads-advertiser-weekly-spend.csv&#x27;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## indexing google-political-ads-advertiser-weekly-spend.csv [] 963.60GB/s, eta:  0s                                                                                indexing google-political-ads-advertiser-weekly-spend.csv [=] 1.09GB/s, eta:  0s                                                                                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## ✔ Processing complete.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## Rows: 296,883</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## Columns: 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Advertiser_ID   &lt;chr&gt; &quot;AR00000475401340059649&quot;, &quot;AR00000475401340059649&quot;, &quot;A…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Advertiser_Name &lt;chr&gt; &quot;Vince Leach for Senate&quot;, &quot;Vince Leach for Senate&quot;, &quot;V…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Election_Cycle  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Week_Start_Date &lt;date&gt; 2020-08-23, 2020-08-30, 2020-09-06, 2020-09-13, 2020-…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_USD       &lt;dbl&gt; 400, 500, 400, 400, 200, 400, 400, 300, 300, 300, 200,…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_EUR       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_INR       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_BGN       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_CZK       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_DKK       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_HUF       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_PLN       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_RON       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_SEK       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_GBP       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_NZD       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_ILS       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_AUD       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_TWD       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_BRL       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_ARS       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_ZAR       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_CLP       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## $ Spend_MXN       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These functions transform <code>metatargetr</code> from a simple targeting tool
into a comprehensive ad intelligence package.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>The <code>metatargetr</code> package provides a powerful and accessible toolkit for
researchers, journalists, and analysts looking to explore the nuances of
digital advertising on digital platforms. As this tutorial has shown, by
fetching and aggregating historical data, you can quickly move from raw
numbers to compelling visualizations that uncover the strategic
decisions behind major ad campaigns.</p>
<p>By offering a direct line to targeting data, both live and historical,
and equipping users with the tools to analyze it effectively,
<code>metatargetr</code> opens new avenues for understanding campaign strategies
and their societal impact. Happy researching!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/data-analysis/04_04_disarm-framework"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data analysis using the DISARM Framework</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/literature/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">index</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#retrieving-targeting-information-for-recent-ads-get_targeting" class="table-of-contents__link toc-highlight">Retrieving Targeting Information for Recent Ads (<code>get_targeting</code>)</a></li><li><a href="#historical-targeting-data-at-scale-get_targeting_db" class="table-of-contents__link toc-highlight">Historical Targeting Data at Scale (<code>get_targeting_db</code>)</a></li></ul></li><li><a href="#analyzing-dhs-ad-campaigns-️" class="table-of-contents__link toc-highlight">Analyzing DHS Ad Campaigns 🏛️</a><ul><li><a href="#retrieving-and-combining-data" class="table-of-contents__link toc-highlight">Retrieving and Combining Data</a></li><li><a href="#visualizing-detailed-targeting-criteria" class="table-of-contents__link toc-highlight">Visualizing &quot;Detailed&quot; Targeting Criteria</a></li><li><a href="#visualizing-location-targeting-criteria" class="table-of-contents__link toc-highlight">Visualizing Location Targeting Criteria</a></li><li><a href="#visualizing-top-10-spenders-using-ethnic-proxies" class="table-of-contents__link toc-highlight">Visualizing Top 10 Spenders using Ethnic Proxies</a></li></ul></li><li><a href="#a-glimpse-into-other-metatargetr-features" class="table-of-contents__link toc-highlight">A Glimpse into Other <code>metatargetr</code> Features</a><ul><li><a href="#facebook-and-instagram-page-information" class="table-of-contents__link toc-highlight">Facebook and Instagram Page Information</a></li><li><a href="#google-ad-data" class="table-of-contents__link toc-highlight">Google Ad Data</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Data Knowledge Hub.</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/background-rationale">Knowledge</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribute/06_01_how-to-contribute">Contribute</a></li><li class="footer__item"><a href="https://upgradedemocracy.de/en/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">upgrade democracy</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://upgradedemocracy.de/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/upgrade-democracy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/contribute/06_02_community">Contributors</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Data Knowledge Hub for Researching Online Discourse  © 2025 - The project is supported by the Bertelsmann Stiftung</div></div></div></footer></div>
</body>
</html>